经典项目-海量用户即时通讯系统 mvc分层模式

项目优势：不同于http协议，网页，这个项目的服务器全都是由自己写，并且包括协议，http协议实现的网页项目有对应的框架。
相当于只用写用户端

需求分析
1）用户注册
2）用户登录
3）显示在线用户列表
4）群聊（广播）
5）点对点聊天
6）离线留言

界面设计

实现功能：代码实现

1. 能够正确的显示客户端的菜单

2. 实现用户登录，用户id=100,密码pwd=123456可以登录，其它用户不能登录

客户端：1 接收输入id和pwd; 2 发送id和密码； 3 接收服务端返回的结果； 4 判断成功还是失败，并显示对应的页面。

关键问题是：怎样组织发送的数据

1.设计消息协议； 

Message[struct]:type string; Data string; 
type有登录消息、语音消息等多种类型，Data是某种消息的序列化数据

发送数据流程： 1.先创建一个Message的结构体； 2. mes.Type = 登录消息类型； 3. mes.Data = 登录消息的内容（序列化后）; 
4. 对mes进行序列化； 5. 在网络传输中，最麻烦丢包； (1) 先给服务器发送mes的长度【有多少个字节】
(2) 再发送消息本身 

服务器：1 接收用户id,pwd(goroutine); 2 比较； 3 返回结果

接收数据流程： 1. 接收到客户端发送的长度； 2. 根据接收到的长度len，再接收消息本身
3. 接收时要判断 实际接收到的消息内容是否等于len; 4 如果不相等，就有纠错协议[后面再说]
5. 取到后反序列化->Message; 6. 取出message.Data(string) -> LoginMes
7. 取出loginMes.userid 和 loginMes.userPwd; 8. 这时就可以比较
9. 根据比较结果返回Mes; 10 发送给客户端

具体功能代码实现

1.完成客户端可以发送消息长度，服务器端可以正常收到该长度值

2.完成客户端可以发送消息本身，服务器端可以正常接收到消息，并根据客户端
发送的消息（LoginMes)，判断用户的合法性，并返回相应的LoginResMes

思路分析：
（1） 让客户端发送消息本身

（2） 服务器端接收到消息，然后反序列化成对应的消息结构体

（3） 服务器端根据反序列化成对应的消息，判断是否登录用户是否合法，返回LoginResMes

(4) 客户端解析返回的LoginResMes显示对应界面

（5）这里我们需要做函数的封装

2） 程序结构的改进，前面的程序虽然完成了功能，但是没有结构，系统的可读性、扩展性和维护性都不好，因此
需要对程序的结构进行改进； 1）修改服务器； 2）再修改客户端

1） 先改进服务器端，先画出**程序的框架图**，再写代码

main.go: 1 监听； 2 等待客户的链接； 3 初始化的工作

processor.go 1 根据客户端的请求调用对应的处理器，完成相应的任务

userProcess,go 1.处理和用户相关的请求 2.登录 3.注册 4.注销 5.用户列表管理

smsProcess.go 1.处理和短消息相关的请求 2.群聊 3. 点对点聊天

utils.go  1. 把一些常用的工具的函数，结构体抽取出来  2. 提供常用的方法和函数

2） 步骤

【1】. 先把分析出来的文件创建好，然后放到相应的文件夹（包）

[2]. 现在根据各个文件，完成的任务不同，将main.go的代码剥离到对应的文件中即可

[3] 从底层开始向上进行修改


2）修改客户端，先画出程序的框架图【思路】，再写代码

main.go 1. 显示第一级菜单 2. 根据用户的输入，去调用对应的处理器

smsProcess.go  1. 处理和短消息相关逻辑 2. 私聊 3. 群发

userProcess.go  1.处理和用户相关的业务  2.登录 3.注册等等...

utils.go  1. 把一些常用的工具的函数，结构体抽取出来  2. 提供常用的方法和函数

server.go 1.显示登录成功界面  2. 保持和服务器端的通讯【即一个协程】 
3. 当读取服务器发送的消息后，就会显示在界面  

2） 步骤

【1】. 先把分析出来的文件创建好，然后放到相应的文件夹（包）

[2]. 现在根据各个文件，完成的任务不同，将main.go的代码剥离到对应的文件中即可

[3] 从底层开始向上进行修改

3）在Redis手动添加测试用户，并画图+说明注意

4）如输入的用户名密码正确在Redis中存在则登录，否则退出系统，并给出相应的提示信息
*用户不存在，你可以重新注册在登陆；*你的密码不正确

增加一个model包，里面专门存放数据，有如下文件

user.go :定义一个结构体 

userDao.go: 1.dao: data access object 2. 编写对User对象（实例）操作的
各种方法。主要就是增删改查

error.go  1.自定义错误 

redis.go :放链接池

5） 实现功能-完成注册用户:将用户信息录入到redis中

（1）.common/message/message.go新增加两个消息类型
(2). 在客户端接收用户的输入
（3）.再client/process/userProcess增加一个Register方法
(4). 在server/

